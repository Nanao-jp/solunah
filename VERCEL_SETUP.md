# Vercel設定ガイド

## 📋 現在の状況

ディレクトリ構造の準備が完了しました。Vercel側での設定について説明します。

---

## 🔧 必要な設定

### 1. 環境変数の設定（オプション）

管理画面を有効にする場合は、Vercelの環境変数を設定します。

#### Vercelダッシュボードでの設定手順

1. Vercelダッシュボードにログイン
2. プロジェクトを選択
3. 「Settings」→「Environment Variables」を開く
4. 以下の環境変数を追加：

**管理画面を有効にする場合**:
```
ADMIN_ENABLED=true
NEXT_PUBLIC_SITE_MODE=admin
```

**公開サイトとして運用する場合**（デフォルト）:
```
ADMIN_ENABLED=false
NEXT_PUBLIC_SITE_MODE=public
```

または環境変数を設定しない（デフォルトで無効）

---

## ✅ 現時点での設定

### 現時点では設定不要

- **adminディレクトリ**: 環境変数が設定されていない場合、自動的にアクセス拒否されます
- **API routes**: 通常通り動作します（`/api/news`など）
- **公開サイト**: 通常通り動作します

### 動作確認

1. **公開サイト**: `solunah.com` → 通常通り動作
2. **管理画面**: `solunah.com/admin` → アクセス拒否（環境変数未設定の場合）
3. **API**: `solunah.com/api/news` → ニュース一覧を取得可能

---

## 🚀 将来的な設定（管理画面を別URLでデプロイする場合）

### 2つのプロジェクトを作成

#### プロジェクト1: 公開サイト
- **プロジェクト名**: `solunah-public`
- **リポジトリ**: `solunah`（同じ）
- **URL**: `solunah.com`
- **環境変数**:
  ```
  ADMIN_ENABLED=false
  NEXT_PUBLIC_SITE_MODE=public
  ```

#### プロジェクト2: 管理画面
- **プロジェクト名**: `solunah-admin`
- **リポジトリ**: `solunah`（同じ）
- **URL**: `admin.solunah.com`
- **環境変数**:
  ```
  ADMIN_ENABLED=true
  NEXT_PUBLIC_SITE_MODE=admin
  ```

---

## 📝 現在の動作

### デフォルトの動作（環境変数未設定）

- ✅ 公開サイト: 正常に動作
- ✅ API routes: 正常に動作
- ❌ 管理画面: アクセス拒否（`/admin`にアクセスするとトップページにリダイレクト）

### 管理画面を有効にする場合

Vercelの環境変数に以下を設定：
```
ADMIN_ENABLED=true
```

これで`/admin`にアクセスできるようになります。

---

## ⚠️ 注意事項

1. **本番環境での管理画面**: 本番環境で管理画面を有効にする場合は、必ず認証機能を実装してからにしてください
2. **環境変数の設定**: 開発環境と本番環境で異なる環境変数を設定できます
3. **セキュリティ**: 管理画面は認証機能が実装されるまで、本番環境では無効にしておくことを推奨します

---

## 🎯 まとめ

### 現時点で必要な設定
- **なし** - デフォルトで公開サイトは動作し、管理画面は無効になっています

### 将来的に必要な設定
- 管理画面を有効にする場合: 環境変数`ADMIN_ENABLED=true`を設定
- 別URLでデプロイする場合: 2つのプロジェクトを作成して環境変数を設定

---

最終更新: 2024年（現在の日付）

